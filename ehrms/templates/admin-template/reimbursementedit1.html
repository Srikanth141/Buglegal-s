{% extends 'admin-template/base_template.html' %}{% block main_content %}

    <style>
        .checkbox {
  position: relative;
  margin: 20px 0;
}
.checkbox { display: block; }

.checkbox input {
  position: absolute;
  margin: 5px;
  padding: 0;
  /* for mobile accessibility (iOS Label Bug) */
  visibility: hidden;
}
.checkbox .label-visible {
  margin-left: 2em;
  margin-bottom: 0;
}

.fake-checkbox{
  position: absolute;
  display: block;
  top: 0;
  left: 3px;
  width: 20px;
  height: 20px;
  border: 1px solid slategray;
  background-color: white;
}
.fake-checkbox:after {
  content: "";
  display: none;
  position: absolute;
  top: 50%;
  left: 50%;
  width: 16px;
  height: 16px;
  background: navy;
  transform: translateX(-50%) translateY(-50%);
}

input[type="checkbox"]:checked + span .fake-checkbox:after { display: block; }

        table {
            border-collapse: collapse;
            width:100%;
            border: none;
            padding: 30%;
        }
tbody tr:nth-child(even) {
    background-color: rgb(239, 239, 247); /* Even row color */
  }

  tbody tr:nth-child(odd) {
    background-color: rgb(227, 232, 235); /* Odd row color */
  }

        
        th, td {
            padding: 20px;
            text-align: left;
            font-size: medium;
            color: white;
        }

        th {
            background-color:black;
            color: white;
        }
        
      
        form{
            width: 90%;
            margin: auto;
            padding: 5%;
        }
        button {
            margin-right: 4px;
        }
    </style>
   <div id="message">
 {% if messages %}
 {% for message in messages %}
 {% if message.tags == 'error' %}
 <div class="alert alert-danger" style="margin-top:10px">{{ message }}</div>
 {% endif %}
 {% if message.tags == 'success' %}
 <div class="alert alert-success" style="margin-top:20px;background-color:green;color: whitesmoke;">{{ message }}</div>
 {% endif %}
 {% endfor %}
{% endif %}
</div>
<script>
    $("#message").show()
    setTimeout(function() {
        $("#message").hide()
    },5000)
</script>
<form method="post" action="{% url 'reimbursement_update' %}" id="reimbursementForm" enctype="multipart/form-data">
    {% csrf_token %}
        <h2>Reimbursements Setup</h2><br><br>
        <div class="form-check">
            <label class="form-check-label" style="color:black;">
                <input type="checkbox" id="Reimbursements_Enabled" name="Reimbursements_Enabled" class="form-check-input" {% if k3.Reimbursements_Enabled == 'Yes' %}checked{% endif %}>
                Reimbursements Enabled
            </label>
        </div>
        <br>
        <div id="conditional-elements">

        <div class="form-control" style="background-color: black; color: white; width: auto; height: auto; border:none;padding: 20px;">
            If you make attachments compulsory, then any reimbursement request will require an attachment
        </div>
        <br>
        <div class="form-check">
            <label class="form-check-label" style="color:black;">
                <input type="checkbox" name="Make_attachments_compulsory"  class="form-check-input" {% if k3.Make_attachments_compulsory == 'Yes' %}checked{% endif %}> 
                Make Attachments compulsory
            </label>
        </div>

        <br>
        
        <div class="form-control" style="background-color: black; color: white; width: auto; height: auto; border:none;padding: 20px;">
             If either automatically include reimbursements when payrollis executed, or you can choose to manually trigger reimbursements
                payout whenever you like.
          </div>
          <br>
          <div class="form-check" >
            <label class="form-check-label" style="color:black;">
                <input type="checkbox" name="Include_reimbursements_with_payroll"  class="form-check-input" {% if k3.Include_reimbursements_with_payroll == 'Yes' %}checked{% endif %}> 
                include Reimbursement with payroll            
            </label>
        </div>

        <br> 
        <div class="table-responsive">    
        <table >
            <thead>
                <tr>
                    <th>Reimbursementtype</th>
                    <th>Enabled</th>
                    <th>Delete</th>
                    

                </tr>
            </thead>

            <tbody >
            {% for r in k2 %}
            {% if r.reimbursement_type != "" and r.reimbursement_type != NULL  %}
            <tr>
                <td style="color: black;">{{ r.reimbursement_type }}</td>
                <td>
                    <input type="checkbox" name="select_reimbursement_{{ r.id }}" {% if r.select_reimbursement == 'Yes' %}checked{% endif %}>
                </td>
                <td>
                    <a href="{% url 'delete_reimbursementsetup1' r.id %}">
                        <i class="fa fa-trash" aria-hidden="true" style="padding-left: 100px;">
                        </i></a>
                </td>

            </tr>
            {% endif %}
            {% endfor %}

                <tr>
                    <td><button type="button" id="addButton" class="btn btn-info" onclick="addRow()" style="height: 50px; width:90px;">Add</button></td>
                </tr>
    
            </tbody>
        </table>
    </div>
          <br>        
        </div>

        <b style="color:black;">* Indicates required fields</b>
        <br>
        <br>
      
        <button type="submit" style="padding-left: 10px; height: 50px; width: 180px; background-color: #0079bf;">
            <a href="setting/"><b style="color: white;">CONTINUE</b></a>
        </button>
                </form>
            
            <script>
                const checkbox = document.getElementById('Reimbursements_Enabled');
                const conditionalElements = document.getElementById('conditional-elements');
            
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        // Checkbox is checked, show the elements
                        conditionalElements.style.display = 'block';
                        continueButton.style.display = 'block';
                    } else {
                        // Checkbox is unchecked, hide the elements
                        conditionalElements.style.display = 'none';
                        continueButton.style.display = 'none';
                    }
                });
            
                // Initial state
                if (!checkbox.checked) {
                    conditionalElements.style.display = 'none';
                    continueButton.style.display = 'none';
                }
            </script>
    <script> 



        function addRow() {
            var table = document.querySelector("table tbody");
            var newRow = table.insertRow(table.rows.length);
            var reimbursement_typeCell = newRow.insertCell(0);
            var select_reimbursementCell = newRow.insertCell(1);
            reimbursement_typeCell.innerHTML = '<input type="text" name="reimbursement_type" value="">';
            select_reimbursementCell.innerHTML = '<input type="checkbox" name="select_reimbursement">';
            document.getElementById("addButton").disabled="true"  
        }
    </script>



    {% endblock main_content %}